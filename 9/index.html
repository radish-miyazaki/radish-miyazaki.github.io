<!DOCTYPE html>
<html lang="ja-jp">
  <head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>make コマンドで複数引数を取れるようにする | method_missing(*)</title>
  <link rel="stylesheet" href="https://radish-miyazaki.github.io/assets/css/post.css" />
  <script defer src="https://radish-miyazaki.github.io/assets/js/lbox.js"></script>
  
  <link rel="stylesheet" href="https://radish-miyazaki.github.io/assets/css/common.css" />
  <link rel="icon" type="image/png" href="https://radish-miyazaki.github.io/assets/icons/ruby.png" />
  <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://radish-miyazaki.github.io/post-cover.png"/>

<meta name="twitter:title" content="make コマンドで複数引数を取れるようにする"/>
<meta name="twitter:description" content="概要 makeコマンドで複数引数を取れるようにする方法があったので記録する。 Dockerコマンドを集約するときに使うと便利。
結論 makeコマンドが受け取った、2番目の引数以降の値をすべて対象のコマンドに渡せばOK。
hogehoge: &lt;引数を渡したいコマンド&gt; $(wordlist 2, $(words $(MAKECMDGOALS) - 2), $(MAKECMDGOALS)) 解説 wordlist Makefileの組み込み関数の一種。 第3引数で指定した値から、第1引数~第2引数の位置の文字列を抽出する。
hoge: @echo $(wordlist 1, 2, &#34;hoge fuga hoge&#34;) # hoge fuga words 文字列数を返す。"/>

  <meta property="og:title" content="make コマンドで複数引数を取れるようにする" />
<meta property="og:description" content="概要 makeコマンドで複数引数を取れるようにする方法があったので記録する。 Dockerコマンドを集約するときに使うと便利。
結論 makeコマンドが受け取った、2番目の引数以降の値をすべて対象のコマンドに渡せばOK。
hogehoge: &lt;引数を渡したいコマンド&gt; $(wordlist 2, $(words $(MAKECMDGOALS) - 2), $(MAKECMDGOALS)) 解説 wordlist Makefileの組み込み関数の一種。 第3引数で指定した値から、第1引数~第2引数の位置の文字列を抽出する。
hoge: @echo $(wordlist 1, 2, &#34;hoge fuga hoge&#34;) # hoge fuga words 文字列数を返す。" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://radish-miyazaki.github.io/9/" /><meta property="og:image" content="https://radish-miyazaki.github.io/post-cover.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-09-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-09-14T00:00:00+00:00" />


</head>
  <body>
    <main>
      <header>
  <a class="site-title" href="https://radish-miyazaki.github.io">method_missing(*)</a>
</header>

      <section class="article">
        <div class="article-header">
          <h2 class="article-title">make コマンドで複数引数を取れるようにする</h2>
          <small class="date">2022-09-14 (Wed)</small>
          <div class="tags">
            
            <a href="https://radish-miyazaki.github.io/tags/makefile" class="tag">makefile</a>
            
          </div>
        </div>
        <div class="content"><h2 id="概要">概要</h2>
<p>makeコマンドで複数引数を取れるようにする方法があったので記録する。
Dockerコマンドを集約するときに使うと便利。</p>
<h2 id="結論">結論</h2>
<p>makeコマンドが受け取った、2番目の引数以降の値をすべて対象のコマンドに渡せばOK。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile"><span style="color:#a6e22e">hogehoge</span><span style="color:#f92672">:</span>
  &lt;引数を渡したいコマンド&gt; <span style="color:#66d9ef">$(</span>wordlist 2, <span style="color:#66d9ef">$(</span>words <span style="color:#66d9ef">$(</span>MAKECMDGOALS<span style="color:#66d9ef">)</span> - 2<span style="color:#66d9ef">)</span>, <span style="color:#66d9ef">$(</span>MAKECMDGOALS<span style="color:#66d9ef">))</span>
</code></pre></div><h2 id="解説">解説</h2>
<h3 id="wordlist">wordlist</h3>
<p>Makefileの組み込み関数の一種。
第3引数で指定した値から、第1引数~第2引数の位置の文字列を抽出する。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile"><span style="color:#a6e22e">hoge</span><span style="color:#f92672">:</span>
	@echo <span style="color:#66d9ef">$(</span>wordlist 1, 2, <span style="color:#e6db74">&#34;hoge fuga hoge&#34;</span><span style="color:#66d9ef">)</span> <span style="color:#75715e"># hoge fuga</span>
</code></pre></div><h3 id="words">words</h3>
<p>文字列数を返す。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile"><span style="color:#a6e22e">hoge</span><span style="color:#f92672">:</span>
  @echo <span style="color:#66d9ef">$(</span>words <span style="color:#e6db74">&#34;hoge fuga hoge&#34;</span><span style="color:#66d9ef">)</span> <span style="color:#75715e"># 3</span>
</code></pre></div><h3 id="makecmdgoals">MAKECMDGOALS</h3>
<p>makeコマンドの引数が渡ってくる。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-makefile" data-lang="makefile"><span style="color:#a6e22e">hoge</span><span style="color:#f92672">:</span>
  @echo <span style="color:#66d9ef">$(</span>MAKECMDGOALS<span style="color:#66d9ef">)</span>
</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-shell" data-lang="shell">make hoge fuga hoge fuga <span style="color:#75715e"># hoge fuga hoge fuga</span>
</code></pre></div><h2 id="所感">所感</h2>
<p>Makefileにそもそも組み込みの関数が存在することを知らなかったので、知ることが出来てよかった。</p>
<h2 id="参考文献">参考文献</h2>
<ul>
<li><a href="https://www.gnu.org/software/make/manual/html_node/Text-Functions.html">8.2 Functions for String Substitution and Analysis</a></li>
<li><a href="https://www.gnu.org/software/make/manual/html_node/Goals.html">9.2 Arguments to Specify the Goals</a></li>
<li><a href="https://tex2e.github.io/blog/makefile/functions">Makefile の関数一覧 | 晴耕雨読</a></li>
</ul>
</div>
      </section>
      <footer>
  <p>&copy; 2023 Radish All rights reserved. </p>
</footer>
    </main>
  </body>
</html>
